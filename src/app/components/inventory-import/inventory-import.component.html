<div class="import-choice-cards">
  <p-card>
    <P>Pour commencer importer un inventaire</P>
    <p-fileupload mode="basic" chooseIcon="pi pi-upload" accept="text/csv" (onSelect)="triggerCsvImport($event)"
                  [auto]="true" chooseLabel="Choisir le fichier"/>
      </p-card>
<!--  TODO ajouter choix simple d'accéder au fichier s'il y a un fichier ouvert -->
</div>
@if (this.displayImportConfiguration()) {


  <div class="flex-display-row">
    <div class="flex-display-columns">
      <p-card header="Configuration du fichier CSV" class="import-option-card">
        <div class="form-options">
          <label class="label-text" for="first-line-header-switch">Première ligne comme entêtes</label>
          <p-toggleswitch
            [(ngModel)]="csvImportParams.firstLineAsHeader"
            (ngModelChange)="this.updateHeader()"
            id="first-line-header-switch"/>
        </div>
        <div class="form-options">
          <span class="label-text">Séparateur de colonnes</span>
          <p-radiobutton value=";" [(ngModel)]="csvImportParams.separator"
                         (ngModelChange)="this.updateHeader()"
                         inputId="separator-option-comma"></p-radiobutton>
          <label for="separator-option-comma">;</label>
          <p-radiobutton value="," [(ngModel)]="csvImportParams.separator"
                         (ngModelChange)="this.updateHeader()"
                         inputId="separator-option-semicolon"></p-radiobutton>
          <label for="separator-option-semicolon">,</label>
        </div>
      </p-card>
      <p-card header="Configuration de l'inventaire" class="import-option-card">

      </p-card>
    </div>
    <div class="flex-display-columns">
      <p-card header="Aperçu de l'inventaire" class="inventory_preview_card">
        <ltg-inventory-import-preview [inventoryPreview]="this.inventoryPreview()"/>
      </p-card>
      <div class="import-confirmation-button">
        <p-button label="Valider et importer" icon="pi pi-check" severity="success"
                  [disabled]="!this.inventoryPreview() || this.inventoryPreview()?.isError"
                  (onClick)="this.importCsv()"/>
      </div>
    </div>
  </div>

}

